<?php

 class Magicfilter { private $db; private $config; private $cache; private $registry; private $url; private $currency; private $session; private $data = array(); public function __construct($registry) { goto KKWg0; x26IB: $this->currency = $registry->get("\143\x75\x72\162\145\x6e\143\171"); goto H1cZJ; TcrGY: $this->session = $registry->get("\163\x65\163\x73\x69\157\x6e"); goto x26IB; bQQN0: $this->registry = $registry; goto Qcg1i; eV11C: $this->config = $registry->get("\143\157\156\x66\151\x67"); goto UUF9w; UUF9w: $this->cache = $registry->get("\x63\141\x63\x68\x65"); goto bQQN0; KKWg0: $this->db = $registry->get("\144\142"); goto eV11C; Qcg1i: $this->url = $registry->get("\165\x72\x6c"); goto TcrGY; H1cZJ: } public function getmanufacture_by_catagory_id_info($data) { goto Ywa36; Ywa36: foreach ($data as $key => $value) { goto lMkG2; Lv5is: e8XkX: goto DVXDa; jcRIf: $dataim = implode("\54", $data); goto XoMi3; lMkG2: $value = trim($value); goto m31XN; XoMi3: goto Bao3b; goto XXpi7; XXpi7: FQwZU: goto CmFdu; m31XN: if (empty($value)) { goto FQwZU; } goto jcRIf; CmFdu: $dataim = $data[0]; goto UKO4P; UKO4P: Bao3b: goto Lv5is; DVXDa: } goto S1ws1; S1ws1: E0ECt: goto uZVIQ; Y81Ls: CrjsG: goto YurJD; qTpEO: return $manufacturer_data; goto NWq_2; YurJD: $sql = "\123\x45\114\105\x43\124\40\52\x20\x46\x52\x4f\x4d\x20" . DB_PREFIX . "\x6d\141\x6e\165\x66\x61\143\x74\165\x72\145\162\40\x20\127\110\x45\x52\x45\40\155\141\156\x75\x66\141\x63\x74\x75\x72\145\162\x5f\151\144\40\x69\156\40\x28{$dataim}\x29"; goto x9nNJ; NWq_2: oCWdL: goto Du9Tc; uZVIQ: if (isset($dataim) && $dataim !== '') { goto CrjsG; } goto ESHjr; ESHjr: return array(); goto CSmHO; x9nNJ: $query = $this->db->query($sql); goto yAr1M; CSmHO: goto oCWdL; goto Y81Ls; yAr1M: $manufacturer_data = $query->rows; goto qTpEO; Du9Tc: } public function filter_data_info($request, $config) { goto mJUac; XwpXy: if ($this->currency->getSymbolLeft($pcode)) { goto PaKuX; } goto f8Rsz; l9w2v: $parts = $request->get["\x70\x61\x74\x68"]; goto tMKik; POnUm: w7uK2: goto hvYjX; OI5Km: CwnNe: goto stZXQ; A7jAn: CIB8d: goto iLT0I; ofxKV: $data["\155\x6f\x64\x75\154\x65\x5f\160\162\151\143\x65\x5f\x66\x69\x6c\164\x65\x72\x5f\163\164\141\164\165\163"] = $this->config->get("\x6d\157\144\x75\x6c\145\137\155\x61\x67\151\143\146\x69\x6c\x74\145\x72\x5f\160\x72\151\x63\145\x5f\146\151\x6c\164\145\162\137\163\x74\141\164\165\x73"); goto gJUJN; oKOV5: $category_info = $mdl->getCategory($category_id); goto x5uHV; iH2LW: H_JFc: goto INrMa; MV82B: $data["\x6d\x6f\144\165\154\x65\137\x6d\x61\x67\x69\x63\x66\x69\154\x74\145\162\x5f\151\x6d\x61\147\145\x5f\x73\x74\141\x74\x75\x73"] = 0; goto gPtHc; lDUzK: if ($this->config->get("\x6d\157\x64\x75\x6c\145\x5f\155\x61\147\x69\143\146\151\154\x74\145\x72\137\151\155\x61\147\145\x5f\163\x74\x61\x74\165\163") != '') { goto H_JFc; } goto MV82B; BeKFh: $product_total = $pmodel->getTotalProducts($filter_data); goto C64tt; yH09E: $magicfilter = array(); goto ACYAG; mO5pT: QqlW1: goto nHwUN; QSL5L: B9eHb: goto P_fRW; kap0B: uuZuJ: goto dqgqI; HvPHi: F5Uwo: goto fYk3n; FVdRM: goto IaLoB; goto t8XsY; gJUJN: if (isset($magicfilter)) { goto qPM0P; } goto yH09E; L1JZr: $data["\155\157\x64\x75\x6c\145\137\155\x61\147\151\143\146\151\x6c\x74\x65\162\x5f\x69\x6d\x61\x67\145\137\150\x65\x69\147\x68\x74"] = 30; goto q_y1k; fYk3n: $data["\160\x72\x69\x63\x65\x5f\162\141\156\147\x65\x5f\155\x69\x6e"] = $this->currency->convert($range[0], "\130\x59\132", $pcode); goto l1Ihg; f0BOn: yV2AK: goto XwpXy; mJUac: if (isset($request->get["\x66\151\154\x74\145\162"])) { goto CIB8d; } goto EnC9_; EnC9_: $filter = ''; goto Dtz97; fhy0T: YBgWl: goto AQ4KH; BTJ1m: RMJy0: goto NvMUS; ODkVy: if ($this->config->get("\x6d\x6f\144\x75\x6c\x65\x5f\155\141\x67\151\143\x66\151\154\164\145\x72\x5f\x69\x6d\x61\x67\x65\x5f\167\151\x64\164\150") != '') { goto w7uK2; } goto W6ko0; INa5y: $magicfilter = $magic->getmanufacture_by_catagory_id($manufacture); goto E7bKk; QGDX1: if (isset($request->get["\160\141\147\145"])) { goto QqlW1; } goto pV18C; ETcyq: $data["\x72\x69\x67\x68\164\137\143\157\x64\145"] = true; goto Z2hJX; cBm2U: t6QWt: goto osL8P; t8XsY: YLmE9: goto hiP9Y; iLT0I: $filter = $request->get["\x66\x69\154\164\x65\162"]; goto cY6z9; mr819: $order = $request->get["\157\x72\x64\145\162"]; goto kMVQt; nHwUN: $page = $request->get["\160\x61\x67\145"]; goto IVHHG; E0Y6u: $pmodel = $this->registry->get("\x6d\x6f\x64\x65\x6c\x5f\143\x61\x74\141\x6c\x6f\147\137\x70\x72\157\x64\x75\x63\x74"); goto BeKFh; UPw_z: $code = $this->currency->getSymbolLeft($pcode); goto guOIQ; SdbFe: foreach ($product_man_list as $key => $value) { $product_man_list_final[$key] = implode("\x5f", $value); ynI4W: } goto efLKo; AQ4KH: $range = explode("\55", "\60\x2d\60"); goto HvPHi; JHtbH: goto B9eHb; goto BXgUn; EO4am: ngrwo: goto FWsD6; XDIyw: $pcode = $this->session->data["\x63\x75\162\x72\x65\156\x63\x79"]; goto B0Vyr; qLVqj: jNX_R: goto Y6FPP; tfSUw: $path = ''; goto cY7Be; ZHOgq: $data["\x70\162\151\143\x65\137\162\x61\x6e\147\145"] = explode("\55", $request->get["\160\x72\x69\x63\145\x5f\162\141\156\147\x65"]); goto QSL5L; E7bKk: sta8u: goto GkT8X; guOIQ: $data["\x72\x69\147\150\164\137\143\157\x64\145"] = false; goto POJSj; Z2hJX: goto Dz08B; goto vWQaw; BXgUn: M_LD3: goto ZHOgq; NrVsA: foreach ($magicfilter as $manufacturer) { goto jJ0uU; U2EmI: $data["\155\141\156\x75\146\141\x63\x74\x75\162\145\162\x73"][] = array("\155\141\x6e\x75\146\x61\143\x74\x75\162\145\162\137\151\144" => $manufacturer["\155\x61\156\x75\146\141\x63\164\x75\162\145\x72\137\151\x64"], "\x6e\141\155\x65" => $manufacturer["\156\x61\x6d\145"], "\x69\155\141\x67\x65" => $manufacturer["\151\x6d\x61\x67\x65"] ? "\151\155\141\x67\145\57" . $manufacturer["\x69\x6d\141\x67\x65"] : "\151\x6d\x61\147\145\x2f\x6e\157\x5f\151\x6d\x61\147\x65\x2e\160\x6e\x67", "\x68\x72\145\146" => $this->url->link("\x70\162\157\x64\165\143\x74\x2f\155\x61\156\x75\146\141\143\164\165\162\x65\x72\57\x69\x6e\x66\x6f", "\155\141\x6e\165\146\x61\143\x74\165\x72\145\162\137\x69\144\75" . $manufacturer["\155\141\x6e\x75\146\x61\x63\x74\165\162\145\x72\137\151\x64"])); goto vB2Mk; jJ0uU: $filter_data1 = array("\146\151\154\164\145\x72\137\x6d\141\156\x75\x66\x61\143\x74\165\x72\145\x72\137\151\144" => $manufacturer["\x6d\x61\156\165\146\141\143\164\165\x72\145\162\137\151\x64"]); goto U2EmI; vB2Mk: szwJo: goto SfIYq; SfIYq: } goto EO4am; UG4_P: $category_id = (int) array_pop($parts); goto w0tc4; IVHHG: grGYe: goto Fi18T; l1Ihg: $data["\160\162\151\x63\x65\137\x72\x61\156\147\x65\x5f\x6d\141\170"] = $this->currency->convert($range[1], "\x58\x59\132", $pcode); goto TK8yS; SGITw: $sort = "\x70\x2e\163\x6f\162\x74\x5f\x6f\162\144\145\162"; goto aqfUt; YNPzl: if ($this->config->get("\x6d\157\x64\x75\x6c\145\x5f\155\141\x67\151\143\146\x69\x6c\164\145\x72\x5f\150\x65\141\x64\151\x6e\147") != '') { goto YLmE9; } goto deU2w; cj1t2: $limit = $config->get($config->get("\x63\x6f\x6e\x66\x69\147\137\164\150\x65\155\x65") . "\x5f\x70\162\157\144\165\143\164\x5f\x6c\x69\x6d\x69\164"); goto MVw5K; Xx7zB: if (isset($request->get["\x6f\x72\144\145\162"])) { goto T_CGS; } goto gX6kc; vfSqo: if (stristr($request->get["\160\141\164\150"], "\137") === FALSE) { goto WuUBA; } goto tfSUw; hiP9Y: $data["\x6d\157\144\x75\154\x65\137\x6d\x61\x67\151\x63\146\x69\x6c\x74\145\162\137\150\x65\141\x64\x69\x6e\147"] = $this->config->get("\x6d\x6f\x64\x75\x6c\x65\x5f\155\141\147\151\x63\x66\151\x6c\164\145\x72\137\x68\x65\x61\x64\x69\156\x67"); goto nzVfq; Emogb: $data["\155\157\144\x75\154\x65\137\155\x61\x67\x69\143\146\x69\x6c\164\145\162\137\151\x6d\x61\x67\145\x5f\150\145\x69\147\150\164"] = $this->config->get("\155\x6f\x64\x75\x6c\145\137\x6d\141\147\151\x63\146\x69\154\164\x65\x72\137\x69\155\x61\x67\x65\137\150\x65\151\147\x68\x74"); goto BTJ1m; cOvwi: WuUBA: goto l9w2v; INrMa: $data["\x6d\x6f\x64\165\x6c\x65\x5f\x6d\x61\147\151\143\x66\151\154\164\x65\x72\x5f\x69\155\x61\x67\x65\x5f\x73\164\141\164\x75\163"] = $this->config->get("\155\157\144\165\154\145\x5f\x6d\x61\147\151\x63\x66\x69\154\164\145\162\137\x69\x6d\x61\x67\x65\x5f\163\164\141\164\165\163"); goto duqsy; IduS0: $range = explode("\x2d", $config->get("\x6d\157\x64\x75\154\x65\x5f\x6d\x61\x67\151\143\146\x69\154\x74\x65\x72\x5f\160\x72\x69\x63\145\137\x66\x69\x6c\164\145\x72\137\162\141\x6e\147\x65")); goto FXMPC; P_fRW: if (version_compare(VERSION, "\63\56\60\56\60\x2e\60", "\x3c") == true) { goto t6QWt; } goto XDIyw; FXMPC: goto F5Uwo; goto fhy0T; QvhiE: $magic = $this->registry->get("\x6d\x6f\x64\x65\154\x5f\x65\x78\x74\145\x6e\163\151\x6f\156\x5f\x6d\x6f\144\165\x6c\x65\137\x6d\x61\147\151\143\146\x69\x6c\x74\145\162"); goto INa5y; w0tc4: goto CcCCy; goto cOvwi; C64tt: $results = $pmodel->getProducts($filter_data); goto dM28Q; I91_X: $category_id = ''; goto UG4_P; f8Rsz: $code = $this->currency->getSymbolRight($pcode); goto ETcyq; osL8P: $pcode = $this->currency->getCode(); goto f0BOn; eiHPs: CcCCy: goto il5sC; cY6z9: hc4lg: goto aOriX; aqfUt: goto x08KB; goto lmXNJ; duqsy: cbg4v: goto ODkVy; VJX9j: AmXCH: goto vxlRT; POJSj: Dz08B: goto rU23l; Y6FPP: if (!isset($request->get["\160\141\164\150"])) { goto bC0J8; } goto vfSqo; q_y1k: goto RMJy0; goto Lw740; E8Q6d: if (!$config->get("\155\x6f\144\x75\x6c\x65\x5f\155\x61\147\x69\143\146\151\x6c\x74\x65\x72\137\x70\x72\151\x63\145\x5f\x66\151\154\164\x65\x72\x5f\162\141\x6e\x67\x65")) { goto YBgWl; } goto IduS0; ACYAG: qPM0P: goto szzJw; dM28Q: $product_man_list = array(); goto EKayI; efLKo: CzBHR: goto kap0B; rU23l: $data["\x70\162\x69\x63\145\137\x63\x6f\144\145"] = $code; goto E8Q6d; WMSk3: gMbFA: goto Jv_QU; kMVQt: Rpj2P: goto QGDX1; B0Vyr: goto yV2AK; goto cBm2U; Fi18T: if (isset($request->get["\154\x69\155\151\164"])) { goto CwnNe; } goto cj1t2; dOHOV: $data["\x70\162\x69\x63\145\137\x72\141\x6e\x67\145"] = array(); goto JHtbH; BBOIC: goto grGYe; goto mO5pT; hvYjX: $data["\155\x6f\x64\x75\x6c\x65\137\155\141\x67\x69\x63\x66\x69\x6c\164\x65\x72\x5f\x69\155\x61\x67\x65\137\167\x69\144\164\150"] = $this->config->get("\155\157\144\165\154\x65\137\x6d\141\147\151\x63\x66\151\154\x74\145\x72\x5f\x69\x6d\141\x67\145\x5f\x77\x69\144\x74\x68"); goto WMSk3; pV18C: $page = 1; goto BBOIC; gX6kc: $order = "\x41\x53\103"; goto ivwLH; MVw5K: goto jNX_R; goto OI5Km; Lw740: KViH5: goto Emogb; Jv_QU: if ($this->config->get("\155\x6f\144\165\154\x65\x5f\155\141\147\151\143\x66\151\154\164\x65\162\137\x69\x6d\141\x67\x65\x5f\x68\145\x69\x67\x68\x74") != '') { goto KViH5; } goto L1JZr; stZXQ: $limit = (int) $request->get["\154\x69\155\151\164"]; goto qLVqj; NNlOo: QUEC5: goto SVomW; lmXNJ: KilMz: goto IT22j; FWsD6: if (isset($request->get["\x70\x72\x69\x63\145\137\162\141\156\x67\x65"])) { goto M_LD3; } goto dOHOV; vWQaw: PaKuX: goto UPw_z; EKayI: $product_man_list_final = array(); goto ft3qF; deU2w: $data["\x6d\x6f\x64\x75\154\x65\x5f\x6d\x61\x67\x69\x63\x66\x69\x6c\x74\x65\162\137\x68\x65\x61\144\x69\x6e\x67"] = "\155\x61\x67\151\x63\x66\151\x6c\x74\145\162"; goto FVdRM; il5sC: $mdl = $this->registry->get("\x6d\157\144\145\154\x5f\143\141\164\141\x6c\157\x67\137\143\141\164\145\x67\x6f\x72\x79"); goto oKOV5; ivwLH: goto Rpj2P; goto g1JSc; dqgqI: $data["\x70\x72\157\x64\x75\x63\164\x5f\x6d\x61\x6e\x5f\154\x69\x73\x74"] = $product_man_list_final; goto YNPzl; aOriX: if (isset($request->get["\163\x6f\162\164"])) { goto KilMz; } goto SGITw; szzJw: if (!isset($magicfilter)) { goto QUEC5; } goto NrVsA; g1JSc: T_CGS: goto mr819; Dtz97: goto hc4lg; goto A7jAn; ft3qF: foreach ($results as $product) { goto xYNO0; xYNO0: $manufacture[] = $product["\155\x61\156\x75\146\141\x63\164\165\162\145\162\x5f\x69\144"]; goto sT9fG; sT9fG: $product_man_list[$product["\x6d\x61\x6e\165\146\141\x63\x74\x75\x72\x65\162\137\151\144"]][] = $product["\160\162\x6f\x64\x75\143\x74\137\x69\x64"]; goto ZZj8z; ZZj8z: U0wfz: goto B1ZGp; B1ZGp: } goto VJX9j; nzVfq: IaLoB: goto lDUzK; E5t9f: goto gMbFA; goto POnUm; GkT8X: if (!(isset($product_man_list) && count($product_man_list) > 0)) { goto uuZuJ; } goto SdbFe; z47GL: x08KB: goto Xx7zB; W6ko0: $data["\155\x6f\x64\x75\x6c\x65\x5f\155\141\147\151\x63\146\151\154\x74\x65\x72\x5f\x69\x6d\x61\147\x65\x5f\167\151\144\164\x68"] = 30; goto E5t9f; cY7Be: $parts = explode("\137", (string) $request->get["\160\141\164\x68"]); goto I91_X; dOkgY: return $data; goto NNlOo; SVomW: bC0J8: goto bf4Q0; NvMUS: $data["\x6d\x6f\144\x75\154\145\x5f\155\141\x6e\165\x66\141\x63\x74\x75\x72\145\162\x5f\163\x74\141\164\x75\163"] = $this->config->get("\155\157\144\x75\x6c\x65\137\155\141\147\151\143\x66\151\x6c\164\145\162\x5f\x6d\x61\x6e\x75\x66\141\143\x74\x75\x72\145\162\137\146\151\154\164\145\x72\137\x73\x74\x61\164\x75\x73"); goto ofxKV; IT22j: $sort = $request->get["\x73\x6f\162\x74"]; goto z47GL; gPtHc: goto cbg4v; goto iH2LW; x5uHV: $filter_data = array("\x66\151\154\164\145\162\137\x63\141\x74\x65\x67\x6f\x72\x79\137\x69\144" => $category_id, "\146\x69\154\x74\x65\x72\137\146\151\154\x74\x65\162" => $filter, "\x73\x6f\162\164" => $sort, "\x6f\162\144\x65\x72" => $order, "\x73\164\x61\x72\164" => ($page - 1) * $limit, "\x6c\151\155\151\164" => $limit); goto E0Y6u; tMKik: $category_id = $request->get["\160\x61\164\x68"]; goto eiHPs; TK8yS: $data["\160\x72\x6f\x64\165\x63\x74\137\x63\154\x61\x73\163"] = $config->get("\155\157\144\x75\x6c\145\137\x6d\x61\147\x69\x63\x66\151\154\x74\145\x72\137\160\x72\151\x63\145\137\x66\x69\154\x74\145\x72\x5f\x63\x6c\141\163\x73"); goto dOkgY; vxlRT: if (!(isset($manufacture) && count($manufacture) > 0)) { goto sta8u; } goto QvhiE; bf4Q0: } }
